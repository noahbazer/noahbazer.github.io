<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Noah Bazer</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="styles.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200;300;400;500;600;700;800;900&family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    </head>
    <body>
        <div class="header">
            <div class="header-start">
                <h3>noahbazer.dev</h3>
            </div>
            <div class="header-end">
                <nav>
                    <a href="about">about</a>
                    <a href="projects">projects</a>
                    <a href="contact">contact</a>
                </nav>
            </div>

        </div>
        <div class="splash">
            <div class="textsplash">
                <h2>your favorite</h2>
                <h2 id="dynText">HTML</h2>
                <h2 id="dynCursor">|</h2>
                <h2>developer</h2>
            </div>
        </div>
        <script async defer>
const dynamicTextActive = false;
let currentWord = 'HTML';
let cursorBlink = false;
let wordTally = 0;
let dynamicText = document.getElementById("dynText");
let wordColor = 'yellow';
const dynamicCursor = document.getElementById("dynCursor");

function blinkCursor() {
    if (cursorBlink === true) {
        dynamicCursor.style.visibility = "hidden";
        setTimeout(() => {
            dynamicCursor.style.visibility = "visible";
            setTimeout(() => {
                blinkCursor();
            }, 500);
        }, 500);
    }
    else if (cursorBlink === false) {
        dynamicCursor.style.visibility = "visible";
        setTimeout(() => {
                blinkCursor();
            }, 1000);
    }
}

const changeTally = function () {
    if (wordTally === 3) {
        wordTally = 0;
    } else {
        wordTally = wordTally + 1;
    }
};

const changeWord = function () {
    switch (wordTally) {
        case 0:
            currentWord = 'HTML';
            wordColor = 'red';
            break;
        case 1:
            currentWord = 'CSS';
            wordColor = 'blue';
            break;
        case 2:
            currentWord = 'Javascript';
            wordColor = 'yellow';
            break;
        case 3:
            currentWord = 'React';
            wordColor = 'cyan';
            break;
    }
};

function buildWord() {
    let j = 0;
    dynamicText.style.color = wordColor;

    return new Promise((resolve) => {
        const buildInt = setInterval(() => {
            dynamicText.innerHTML += currentWord[j];

            if (j === currentWord.length - 1) {
                clearInterval(buildInt);
                resolve();
            }

            j++;
        }, 100);
    });
}

function deleteWord() {
    let i = dynamicText.innerHTML.length;

    return new Promise((resolve) => {
        const intervalId = setInterval(() => {
            dynamicText.innerHTML = dynamicText.innerHTML.slice(0, -1);
            i--;

            if (i === 0) {
                clearInterval(intervalId);
                resolve(); 
            }
        }, 100);
    });
}

blinkCursor();

const wordUpdater = async function () {
    dynamicCursor.style.visibility = "visible";
    cursorBlink = false;
    await deleteWord();
    cursorBlink = true;
    changeTally();
    changeWord();
    await new Promise(resolve => setTimeout(resolve, 500));
    dynamicCursor.style.visibility = "visible";
    cursorBlink = false;
    await buildWord();
    cursorBlink = true;
};

setInterval(() => {
    wordUpdater();
}, 7500);

wordUpdater();
        </script>
    </body>
</html>